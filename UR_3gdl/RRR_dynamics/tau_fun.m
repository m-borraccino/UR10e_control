function tau = tau_fun(g,param,ddq,dq,q,m1,m2,m3)
%TAU_FUN
%    TAU = TAU_FUN(A2,A3,AL2,AL3,D2,D3,DDQ1,DDQ2,DDQ3,DQ1,DQ2,DQ3,G,M1,M2,M3,Q2,Q3)

%    This function was generated by the Symbolic Math Toolbox version 9.1.
%    12-Jun-2022 16:00:46

d1  = param(1);
al2 = param(2);
d2  = param(3);
al3 = param(4);
d3  = param(5);
a2  = param(6);
a3  = param(7);

q1 = q(1);
q2 = q(2);
q3 = q(3);

dq1 = dq(1);
dq2 = dq(2);
dq3 = dq(3);

ddq1 = ddq(1);
ddq2 = ddq(2);
ddq3 = ddq(3);

t2 = cos(q2);
t3 = cos(q3);
t4 = sin(q2);
t5 = sin(q3);
t6 = a3+al3;
t7 = d2+d3;
t8 = m2+m3;
t9 = q2+q3;
t10 = a3.*2.0;
t11 = a2.^2;
t12 = a3.^2;
t13 = al3.*2.0;
t14 = al2.^2;
t15 = al3.^2;
t16 = d2.^2;
t17 = dq1.^2;
t18 = q2.*2.0;
t19 = q3.*2.0;
t20 = a2.*al2.*2.0;
t22 = a3.*al3.*4.0;
t25 = a2.*d2.*m2;
t26 = al2.*d2.*m2;
t27 = al2.*d2.*m3;
t28 = al2.*d3.*m3;
t33 = a2.*al2.*m2.*4.0;
t48 = m2.*2.468835e-1;
t21 = al3.*t10;
t23 = cos(t18);
t24 = sin(t18);
t29 = cos(t9);
t30 = sin(t9);
t31 = a3.*t10;
t32 = al3.*t13;
t34 = q2+t9;
t37 = m2.*t11.*2.0;
t38 = m2.*t14.*2.0;
t39 = m3.*t14.*2.0;
t40 = t9.*2.0;
t41 = al2.*t3.*t6;
t42 = t6.*2.0;
t47 = t25+t26+t27+t28;
t35 = cos(t34);
t36 = sin(t34);
t43 = cos(t40);
t44 = sin(t40);
t45 = m3.*t6.*t7.*t30;
t49 = t12+t15+t21+1.077695133333333e-1;
t50 = t22+t31+t32+2.155390266666667e-1;
t51 = t12+t15+t21+t41+1.105820133333333e-1;
t54 = t33+t37+t38+t39+t48;
t46 = al2.*t36.*t42;
t52 = t44.*t49;
t53 = t44.*t50;
t55 = t24.*t54;
t56 = t46+t52;
t57 = m3.*t56.*2.0;
t58 = t55+t57;
et1 = m1.*2.8125e-3+m2.*6.453337499999999e-2+m3.*5.669725666666667e-2+(m2.*t11)./2.0+(m3.*t12)./2.0+(m2.*t14)./2.0+(m3.*t14)./2.0+m2.*t16+(m3.*t15)./2.0+m3.*t16+m2.*t23.*6.172087499999999e-2;
et2 = m3.*t43.*5.388475666666667e-2+d3.^2.*m3+a2.*al2.*m2+a3.*al3.*m3+d2.*d3.*m3.*2.0+(m2.*t11.*t23)./2.0+(m2.*t14.*t23)./2.0+(m3.*t14.*t23)./2.0+(m3.*t12.*t43)./2.0+(m3.*t15.*t43)./2.0+a3.*al2.*m3.*t3+a2.*al2.*m2.*t23+a3.*al2.*m3.*t35+a3.*al3.*m3.*t43+al2.*al3.*m3.*t3+al2.*al3.*m3.*t35;
et3 = (t17.*(m3.*(t53+al2.*t6.*t36.*4.0)+t24.*(t39+m2.*(t11+t14+t20+1.2344175e-1).*2.0)))./4.0+ddq1.*(t45+t4.*(t25+t28+al2.*d2.*t8))-g.*(t2.*(a2.*m2+al2.*t8)+m3.*t6.*t29)+ddq2.*(m3.*t41.*2.0+m3.*(t12+t14+t15+t21+1.105820133333333e-1)+m2.*(t11+t14+t20+1.2625425e-1))+ddq3.*m3.*t51-al2.*dq3.*m3.*t5.*t6.*(dq2+dq3);
et4 = -al2.*dq2.*dq3.*m3.*t5.*t6;
mt1 = [ddq3.*t45+ddq1.*(et1+et2)+dq2.*(dq1.*t58.*(-1.0./4.0)+dq2.*(t2.*t47+m3.*t6.*t7.*t29)+dq3.*m3.*t6.*t7.*t29)-dq1.*((dq2.*t58)./4.0+(dq3.*m3.*(t52+al2.*t5.*t6+al2.*t6.*t36))./2.0)+ddq2.*(t45+t4.*t47)+dq3.*m3.*(-dq1.*(t44.*(t12./2.0+t15./2.0+a3.*al3+5.388475666666667e-2)+(al2.*t5.*t6)./2.0+(al2.*t6.*t36)./2.0)+dq2.*t6.*t7.*t29+dq3.*t6.*t7.*t29);et3+et4];
mt2 = [ddq1.*t45+(m3.*t17.*(t46+t53+al2.*t5.*t42))./4.0+ddq3.*m3.*(t12+t15+t21+1.105820133333333e-1)+ddq2.*m3.*t51-g.*m3.*t6.*t29+al2.*dq2.^2.*m3.*t5.*t6];
tau = [mt1;mt2];
